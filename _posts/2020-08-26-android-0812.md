---
title:  "[안드로이드0826] 웹, 웹 어플리케이션 연동"
date: 2020-8-26
categories: ['일반']
tags: ['블로그', 'jekyll', 'github', 'github.io']
---








20200826 (수) 
### 수업 목차
#### 1. NetTest 프로젝트 | 웹 연동

예제1) [UI에 웹사이트 띄우기](#예제1-UI에-웹사이트-띄우기)<br/>

예제2) [웹에서 xml 파일 불러와서 사용하기](#예제2-웹에서-xml-파일-불러와서-사용하기)<br/>

예제3) [웹에서 json 파일 불러와서 사용하기](#예제3-웹에서-json-파일-불러와서-사용하기)<br/>

예제4) [Socket 통신](#예제4-Socket-통신)<br/>


#### 2. WebApp 프로젝트 | 웹 어플리케이션 연동 (진행중)

예제1) [로그인 기능](#예제1-로그인)<br/>







<br/>
<br/>


#  1. NetTest 프로젝트 | 안드로이드 웹 연동
<br/>

## 예제1) UI에 웹사이트 띄우기

> manifest.xml  <br/>

인터넷 사용 permission 추가
```xml
<uses-permission android:name="android.permission.INTERNET"/>
```

> activity_main.xml<br/>

<img src="https://user-images.githubusercontent.com/62331803/91241093-d42f8100-e77e-11ea-86b6-38c6ad4d0e77.png" width="70%">

<br/>

>  MainActivity.java

<details>
<summary> 코드보기 </summary>

<script src="https://gist.github.com/Ahnyezi/cf043a5df4f6a16194ad0139c8798307.js"></script>

</details>

<br/>

> 결과화면 <br/>

- 주소형식: https://주소~ <br/>
<img src="https://user-images.githubusercontent.com/62331803/91240967-769b3480-e77e-11ea-85a3-724a72957abf.png" width="50%">

<br/>

## 예제2) 웹에서 xml 파일 불러와서 사용하기

> get API key<br/>

https://openweathermap.org/price

<br/>

<img src="https://user-images.githubusercontent.com/62331803/91241233-41dbad00-e77f-11ea-82db-b768ad7591e5.png" width="80%">

<br/>

> 샘플 xml파일 <br/>

<img src="https://user-images.githubusercontent.com/62331803/91243842-d6490e00-e785-11ea-8f0c-ebd7fc5c941b.png" width="80%">
<br/>

> WeatherInfo.java | VO클래스

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/75e08d73488d0b4b997c93194dff4115.js"></script>
</details>

<br/>

> activity_main2.xml <br/>

<img src="https://user-images.githubusercontent.com/62331803/91242914-9b45db00-e783-11ea-8398-acd8e01a9bea.png" width="70%">

<br/>

> MainActivity2.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/a81668e5fd1d175860ceb1d6a439fb2a.js"></script>

</details>

<br/>

> 결과화면<br/>

<img src="https://user-images.githubusercontent.com/62331803/91243583-473bf600-e785-11ea-8aa2-7cb08e16ee73.png" width="50%">

<br/>


## 예제3) 웹에서 json 파일 불러와서 사용하기


> 샘플 json 파일<br/>

![image](https://user-images.githubusercontent.com/62331803/91244236-d269bb80-e786-11ea-90e5-0e744fe1db34.png)

<br/>

> activity_main3.xml<br/>

activity_main2.xml 과 동일

<br/><br/>

> MainActivity3.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/15baf0c725ffd8755f2c30d91e85a7a1.js"></script>


</details>

<br/>

> WeatherInfo2.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/dbd60a55d821cc68570b3f7555a5b577.js"></script>

</details>
<br/>

> Coord.java | VO 클래스

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/7611975fa29c5b8002d9047c7dcba063.js"></script>

</details>

<br/>

> Main.java | VO 클래스

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/fae2bc7bca7838b254725cb77527e1b5.js"></script>

</details>


<br/>

> 결과화면<br/>

<img src="https://user-images.githubusercontent.com/62331803/91246102-04305180-e78a-11ea-8874-46e95c471185.png" width="50%">

<br/>

## 예제4) Socket 통신

> 안드로이드와 통신할 Server 시작

`Eclipse>>java1>>p0428>>EchoServer` <br/>

<img src="https://user-images.githubusercontent.com/62331803/91247154-95082c80-e78c-11ea-8a06-c8db4406f1e6.png" width="80%">

<details>
<summary> EchoServer.java 코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/2695e2a00d7892ead1ad09cbef88eb69.js"></script>

</details>

<br/>

> activity_main4.xml <br/>

<img src="https://user-images.githubusercontent.com/62331803/91248164-faf5b380-e78e-11ea-877f-6a58c1a43749.png" width="70%">

<br/>

> MainActivity4.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/326139471da36eb9a84a5267fe4cbfb9.js"></script>

</details>

<br/>

> MyThread.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/7c43c8f018a7ceeb42ad3d9aae856ae5.js"></script>

</details>

<br/>


> 결과화면

- 안드로이드(클라이언트)에서 전송<br/>
![image](https://user-images.githubusercontent.com/62331803/91252456-9b9ca100-e798-11ea-918c-6cf89cc9b665.png)

- 서버측 확인<br/>
![image](https://user-images.githubusercontent.com/62331803/91252479-a35c4580-e798-11ea-9394-26a319c0d6f4.png)

<br/>



# 2. WebApp 프로젝트 | 자바 웹어플리케이션과 연동(진행중)

<br/>

## 예제1) 로그인

### `1-1) 서버측 -  자바 웹`

> `web_and`  프로젝트 생성<br/>

<img src="https://user-images.githubusercontent.com/62331803/91259066-b5de7b00-e7a8-11ea-9246-5c20f06eb266.png" width="50%">

<br>

> build path<br/>

<img src="https://user-images.githubusercontent.com/62331803/91259176-f3db9f00-e7a8-11ea-8f3e-a99df0ba0538.png" width="60%">

<br/>


> servlet 생성 <br/>

`Java Resources>> src >> src >> login.java`

<script src="https://gist.github.com/Ahnyezi/63c8b4dc0effb0f6628a3c184f4826f5.js"></script>

<br/>

> 뷰 페이지 생성 <br/>

`WebContent>>views>>login.jsp`

```jsp
<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
{"flag":${flag}}
```

<br/>

### `1-2) 클라이언트측 - 안드로이드`


> build.gradle(Module:app) 추가<br/>

뷰모델 사용을 위한 생명주기 extensions 설정

```gradle
def dependencies{
...
		implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'
}
```

<br/>

> manifest.xml<br/>

안드로이는 웹 연동시 https를 권장.<br/>
http방식을 허용하기 위한 설정 추가
```xml

<application  
 ...
  android:usesCleartextTraffic="true">
```

<br/>

> RequestHttpURLConnection.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/a5bd9aad7edd6fc07bcde021691b7717.js"></script>


</details>

<br/>


> webViewModel.java 

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/f5e6347a18ba7ec70547ec130595b2e1.js"></script>

</details>

<br/>

> activity_main.xml<br/>

<img src="https://user-images.githubusercontent.com/62331803/91257422-c42a9800-e7a4-11ea-914f-e8952bb1b8da.png" width="70%">

<br/>

> MainActivity.java
<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/86cca7787d3f61be290f648ecf97d342.js"></script>

</details>

<br/>


> activity_login.xml<br/>

<img src="https://user-images.githubusercontent.com/62331803/91258699-f38ed400-e7a7-11ea-8bf0-04662aeaf2a0.png" width="70%">

<br/>

> LoginActivity.java

<details>
<summary>코드보기</summary>

<script src="https://gist.github.com/Ahnyezi/fc7634724921490c997aedecf9e8063b.js"></script>
</details>

<br/>

> 결과화면 <br/>

1. 로그인 <br/>
<img src="https://user-images.githubusercontent.com/62331803/91266149-086d6680-e7ac-11ea-8aeb-2aa6ba2c2a70.png" width="50%">


2. 뷰 페이지 확인<br/>
<img src="https://user-images.githubusercontent.com/62331803/91259675-e8d53e80-e7a9-11ea-8663-1eb8292d83d2.png" width="80%">






















